{"ast":null,"code":"function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n    return arr2;\n  }\n}\nvar arrayWithoutHoles = _arrayWithoutHoles;\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\nvar iterableToArray = _iterableToArray;\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\nvar nonIterableSpread = _nonIterableSpread;\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\nvar toConsumableArray = _toConsumableArray;\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\nvar runtime_1 = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2014-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  var runtime = function (exports) {\n    var Op = Object.prototype;\n    var hasOwn = Op.hasOwnProperty;\n    var undefined$1; // More compressible than void 0.\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n    function wrap(innerFn, outerFn, self, tryLocsList) {\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n      var generator = Object.create(protoGenerator.prototype);\n      var context = new Context(tryLocsList || []);\n\n      // The ._invoke method unifies the implementations of the .next,\n      // .throw, and .return methods.\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\n      return generator;\n    }\n    exports.wrap = wrap;\n\n    // Try/catch helper to minimize deoptimizations. Returns a completion\n    // record like context.tryEntries[i].completion. This interface could\n    // have been (and was previously) designed to take a closure to be\n    // invoked without arguments, but in all the cases we care about we\n    // already have an existing method we want to call, so there's no need\n    // to create a new function object. We can even get away with assuming\n    // the method takes exactly one argument, since that happens to be true\n    // in every case, so we don't have to touch the arguments object. The\n    // only additional allocation required is the completion record, which\n    // has a stable shape and so hopefully should be cheap to allocate.\n    function tryCatch(fn, obj, arg) {\n      try {\n        return {\n          type: \"normal\",\n          arg: fn.call(obj, arg)\n        };\n      } catch (err) {\n        return {\n          type: \"throw\",\n          arg: err\n        };\n      }\n    }\n    var GenStateSuspendedStart = \"suspendedStart\";\n    var GenStateSuspendedYield = \"suspendedYield\";\n    var GenStateExecuting = \"executing\";\n    var GenStateCompleted = \"completed\";\n\n    // Returning this object from the innerFn has the same effect as\n    // breaking out of the dispatch switch statement.\n    var ContinueSentinel = {};\n\n    // Dummy constructor functions that we use as the .constructor and\n    // .constructor.prototype properties for functions that return Generator\n    // objects. For full spec compliance, you may wish to configure your\n    // minifier not to mangle the names of these two functions.\n    function Generator() {}\n    function GeneratorFunction() {}\n    function GeneratorFunctionPrototype() {}\n\n    // This is a polyfill for %IteratorPrototype% for environments that\n    // don't natively support it.\n    var IteratorPrototype = {};\n    IteratorPrototype[iteratorSymbol] = function () {\n      return this;\n    };\n    var getProto = Object.getPrototypeOf;\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n      // This environment has a native %IteratorPrototype%; use it instead\n      // of the polyfill.\n      IteratorPrototype = NativeIteratorPrototype;\n    }\n    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\n    GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n    // Helper for defining the .next, .throw, and .return methods of the\n    // Iterator interface in terms of a single ._invoke method.\n    function defineIteratorMethods(prototype) {\n      [\"next\", \"throw\", \"return\"].forEach(function (method) {\n        prototype[method] = function (arg) {\n          return this._invoke(method, arg);\n        };\n      });\n    }\n    exports.isGeneratorFunction = function (genFun) {\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\n      return ctor ? ctor === GeneratorFunction ||\n      // For the native GeneratorFunction constructor, the best we can\n      // do is to check its .name property.\n      (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n    };\n    exports.mark = function (genFun) {\n      if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n      } else {\n        genFun.__proto__ = GeneratorFunctionPrototype;\n        if (!(toStringTagSymbol in genFun)) {\n          genFun[toStringTagSymbol] = \"GeneratorFunction\";\n        }\n      }\n      genFun.prototype = Object.create(Gp);\n      return genFun;\n    };\n\n    // Within the body of any async function, `await x` is transformed to\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n    // meant to be awaited.\n    exports.awrap = function (arg) {\n      return {\n        __await: arg\n      };\n    };\n    function AsyncIterator(generator) {\n      function invoke(method, arg, resolve, reject) {\n        var record = tryCatch(generator[method], generator, arg);\n        if (record.type === \"throw\") {\n          reject(record.arg);\n        } else {\n          var result = record.arg;\n          var value = result.value;\n          if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n            return Promise.resolve(value.__await).then(function (value) {\n              invoke(\"next\", value, resolve, reject);\n            }, function (err) {\n              invoke(\"throw\", err, resolve, reject);\n            });\n          }\n          return Promise.resolve(value).then(function (unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration.\n            result.value = unwrapped;\n            resolve(result);\n          }, function (error) {\n            // If a rejected Promise was yielded, throw the rejection back\n            // into the async generator function so it can be handled there.\n            return invoke(\"throw\", error, resolve, reject);\n          });\n        }\n      }\n      var previousPromise;\n      function enqueue(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new Promise(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(callInvokeWithMethodAndArg,\n        // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n\n      // Define the unified helper method that is used to implement .next,\n      // .throw, and .return (see defineIteratorMethods).\n      this._invoke = enqueue;\n    }\n    defineIteratorMethods(AsyncIterator.prototype);\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n      return this;\n    };\n    exports.AsyncIterator = AsyncIterator;\n\n    // Note that simple async functions are implemented on top of\n    // AsyncIterator objects; they just return a Promise for the value of\n    // the final result produced by the iterator.\n    exports.async = function (innerFn, outerFn, self, tryLocsList) {\n      var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n      return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function (result) {\n        return result.done ? result.value : iter.next();\n      });\n    };\n    function makeInvokeMethod(innerFn, self, context) {\n      var state = GenStateSuspendedStart;\n      return function invoke(method, arg) {\n        if (state === GenStateExecuting) {\n          throw new Error(\"Generator is already running\");\n        }\n        if (state === GenStateCompleted) {\n          if (method === \"throw\") {\n            throw arg;\n          }\n\n          // Be forgiving, per 25.3.3.3.3 of the spec:\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n          return doneResult();\n        }\n        context.method = method;\n        context.arg = arg;\n        while (true) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n          if (context.method === \"next\") {\n            // Setting context._sent for legacy support of Babel's\n            // function.sent implementation.\n            context.sent = context._sent = context.arg;\n          } else if (context.method === \"throw\") {\n            if (state === GenStateSuspendedStart) {\n              state = GenStateCompleted;\n              throw context.arg;\n            }\n            context.dispatchException(context.arg);\n          } else if (context.method === \"return\") {\n            context.abrupt(\"return\", context.arg);\n          }\n          state = GenStateExecuting;\n          var record = tryCatch(innerFn, self, context);\n          if (record.type === \"normal\") {\n            // If an exception is thrown from innerFn, we leave state ===\n            // GenStateExecuting and loop back for another invocation.\n            state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n            if (record.arg === ContinueSentinel) {\n              continue;\n            }\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          } else if (record.type === \"throw\") {\n            state = GenStateCompleted;\n            // Dispatch the exception by looping back around to the\n            // context.dispatchException(context.arg) call above.\n            context.method = \"throw\";\n            context.arg = record.arg;\n          }\n        }\n      };\n    }\n\n    // Call delegate.iterator[context.method](context.arg) and handle the\n    // result, either by returning a { value, done } result from the\n    // delegate iterator, or by modifying context.method and context.arg,\n    // setting context.delegate to null, and returning the ContinueSentinel.\n    function maybeInvokeDelegate(delegate, context) {\n      var method = delegate.iterator[context.method];\n      if (method === undefined$1) {\n        // A .throw or .return when the delegate iterator has no .throw\n        // method always terminates the yield* loop.\n        context.delegate = null;\n        if (context.method === \"throw\") {\n          // Note: [\"return\"] must be used for ES3 parsing compatibility.\n          if (delegate.iterator[\"return\"]) {\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            context.method = \"return\";\n            context.arg = undefined$1;\n            maybeInvokeDelegate(delegate, context);\n            if (context.method === \"throw\") {\n              // If maybeInvokeDelegate(context) changed context.method from\n              // \"return\" to \"throw\", let that override the TypeError below.\n              return ContinueSentinel;\n            }\n          }\n          context.method = \"throw\";\n          context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n        return ContinueSentinel;\n      }\n      var record = tryCatch(method, delegate.iterator, context.arg);\n      if (record.type === \"throw\") {\n        context.method = \"throw\";\n        context.arg = record.arg;\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n      var info = record.arg;\n      if (!info) {\n        context.method = \"throw\";\n        context.arg = new TypeError(\"iterator result is not an object\");\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n      if (info.done) {\n        // Assign the result of the finished delegate to the temporary\n        // variable specified by delegate.resultName (see delegateYield).\n        context[delegate.resultName] = info.value;\n\n        // Resume execution at the desired location (see delegateYield).\n        context.next = delegate.nextLoc;\n\n        // If context.method was \"throw\" but the delegate handled the\n        // exception, let the outer generator proceed normally. If\n        // context.method was \"next\", forget context.arg since it has been\n        // \"consumed\" by the delegate iterator. If context.method was\n        // \"return\", allow the original .return call to continue in the\n        // outer generator.\n        if (context.method !== \"return\") {\n          context.method = \"next\";\n          context.arg = undefined$1;\n        }\n      } else {\n        // Re-yield the result returned by the delegate method.\n        return info;\n      }\n\n      // The delegate iterator is finished, so forget it and continue with\n      // the outer generator.\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    // Define Generator.prototype.{next,throw,return} in terms of the\n    // unified ._invoke helper method.\n    defineIteratorMethods(Gp);\n    Gp[toStringTagSymbol] = \"Generator\";\n\n    // A Generator should always return itself as the iterator object when the\n    // @@iterator function is called on it. Some browsers' implementations of the\n    // iterator prototype chain incorrectly implement this, causing the Generator\n    // object to not be returned from this call. This ensures that doesn't happen.\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\n    Gp[iteratorSymbol] = function () {\n      return this;\n    };\n    Gp.toString = function () {\n      return \"[object Generator]\";\n    };\n    function pushTryEntry(locs) {\n      var entry = {\n        tryLoc: locs[0]\n      };\n      if (1 in locs) {\n        entry.catchLoc = locs[1];\n      }\n      if (2 in locs) {\n        entry.finallyLoc = locs[2];\n        entry.afterLoc = locs[3];\n      }\n      this.tryEntries.push(entry);\n    }\n    function resetTryEntry(entry) {\n      var record = entry.completion || {};\n      record.type = \"normal\";\n      delete record.arg;\n      entry.completion = record;\n    }\n    function Context(tryLocsList) {\n      // The root entry object (effectively a try statement without a catch\n      // or a finally block) gives us a place to store values thrown from\n      // locations where there is no enclosing try statement.\n      this.tryEntries = [{\n        tryLoc: \"root\"\n      }];\n      tryLocsList.forEach(pushTryEntry, this);\n      this.reset(true);\n    }\n    exports.keys = function (object) {\n      var keys = [];\n      for (var key in object) {\n        keys.push(key);\n      }\n      keys.reverse();\n\n      // Rather than returning an object with a next method, we keep\n      // things simple and return the next function itself.\n      return function next() {\n        while (keys.length) {\n          var key = keys.pop();\n          if (key in object) {\n            next.value = key;\n            next.done = false;\n            return next;\n          }\n        }\n\n        // To avoid creating an additional object, we just hang the .value\n        // and .done properties off the next function object itself. This\n        // also ensures that the minifier will not anonymize the function.\n        next.done = true;\n        return next;\n      };\n    };\n    function values(iterable) {\n      if (iterable) {\n        var iteratorMethod = iterable[iteratorSymbol];\n        if (iteratorMethod) {\n          return iteratorMethod.call(iterable);\n        }\n        if (typeof iterable.next === \"function\") {\n          return iterable;\n        }\n        if (!isNaN(iterable.length)) {\n          var i = -1,\n            next = function next() {\n              while (++i < iterable.length) {\n                if (hasOwn.call(iterable, i)) {\n                  next.value = iterable[i];\n                  next.done = false;\n                  return next;\n                }\n              }\n              next.value = undefined$1;\n              next.done = true;\n              return next;\n            };\n          return next.next = next;\n        }\n      }\n\n      // Return an iterator with no values.\n      return {\n        next: doneResult\n      };\n    }\n    exports.values = values;\n    function doneResult() {\n      return {\n        value: undefined$1,\n        done: true\n      };\n    }\n    Context.prototype = {\n      constructor: Context,\n      reset: function (skipTempReset) {\n        this.prev = 0;\n        this.next = 0;\n        // Resetting context._sent for legacy support of Babel's\n        // function.sent implementation.\n        this.sent = this._sent = undefined$1;\n        this.done = false;\n        this.delegate = null;\n        this.method = \"next\";\n        this.arg = undefined$1;\n        this.tryEntries.forEach(resetTryEntry);\n        if (!skipTempReset) {\n          for (var name in this) {\n            // Not sure about the optimal order of these conditions:\n            if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n              this[name] = undefined$1;\n            }\n          }\n        }\n      },\n      stop: function () {\n        this.done = true;\n        var rootEntry = this.tryEntries[0];\n        var rootRecord = rootEntry.completion;\n        if (rootRecord.type === \"throw\") {\n          throw rootRecord.arg;\n        }\n        return this.rval;\n      },\n      dispatchException: function (exception) {\n        if (this.done) {\n          throw exception;\n        }\n        var context = this;\n        function handle(loc, caught) {\n          record.type = \"throw\";\n          record.arg = exception;\n          context.next = loc;\n          if (caught) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            context.method = \"next\";\n            context.arg = undefined$1;\n          }\n          return !!caught;\n        }\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          var record = entry.completion;\n          if (entry.tryLoc === \"root\") {\n            // Exception thrown outside of any try block that could handle\n            // it, so set the completion value of the entire function to\n            // throw the exception.\n            return handle(\"end\");\n          }\n          if (entry.tryLoc <= this.prev) {\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n            if (hasCatch && hasFinally) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              } else if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else if (hasCatch) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              }\n            } else if (hasFinally) {\n              if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else {\n              throw new Error(\"try statement without catch or finally\");\n            }\n          }\n        }\n      },\n      abrupt: function (type, arg) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n            var finallyEntry = entry;\n            break;\n          }\n        }\n        if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n          // Ignore the finally entry if control is not jumping to a\n          // location outside the try/catch block.\n          finallyEntry = null;\n        }\n        var record = finallyEntry ? finallyEntry.completion : {};\n        record.type = type;\n        record.arg = arg;\n        if (finallyEntry) {\n          this.method = \"next\";\n          this.next = finallyEntry.finallyLoc;\n          return ContinueSentinel;\n        }\n        return this.complete(record);\n      },\n      complete: function (record, afterLoc) {\n        if (record.type === \"throw\") {\n          throw record.arg;\n        }\n        if (record.type === \"break\" || record.type === \"continue\") {\n          this.next = record.arg;\n        } else if (record.type === \"return\") {\n          this.rval = this.arg = record.arg;\n          this.method = \"return\";\n          this.next = \"end\";\n        } else if (record.type === \"normal\" && afterLoc) {\n          this.next = afterLoc;\n        }\n        return ContinueSentinel;\n      },\n      finish: function (finallyLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.finallyLoc === finallyLoc) {\n            this.complete(entry.completion, entry.afterLoc);\n            resetTryEntry(entry);\n            return ContinueSentinel;\n          }\n        }\n      },\n      \"catch\": function (tryLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc === tryLoc) {\n            var record = entry.completion;\n            if (record.type === \"throw\") {\n              var thrown = record.arg;\n              resetTryEntry(entry);\n            }\n            return thrown;\n          }\n        }\n\n        // The context.catch method must only be called with a location\n        // argument that corresponds to a known catch block.\n        throw new Error(\"illegal catch attempt\");\n      },\n      delegateYield: function (iterable, resultName, nextLoc) {\n        this.delegate = {\n          iterator: values(iterable),\n          resultName: resultName,\n          nextLoc: nextLoc\n        };\n        if (this.method === \"next\") {\n          // Deliberately forget the last sent value so that we don't\n          // accidentally pass it on to the delegate.\n          this.arg = undefined$1;\n        }\n        return ContinueSentinel;\n      }\n    };\n\n    // Regardless of whether this script is executing as a CommonJS module\n    // or not, return the runtime object so that we can declare the variable\n    // regeneratorRuntime in the outer scope, which allows this module to be\n    // injected easily by `bin/regenerator --include-runtime script.js`.\n    return exports;\n  }(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  module.exports);\n  try {\n    regeneratorRuntime = runtime;\n  } catch (accidentalStrictMode) {\n    // This module should not be running in strict mode, so the above\n    // assignment should always work unless something is misconfigured. Just\n    // in case runtime.js accidentally runs in strict mode, we can escape\n    // strict mode using a global Function call. This could conceivably fail\n    // if a Content Security Policy forbids using Function, but in that case\n    // the proper solution is to fix the accidental strict mode problem. If\n    // you've misconfigured your bundler to force strict mode and applied a\n    // CSP to forbid Function, and you're not willing to fix either of those\n    // problems, please detail your unique predicament in a GitHub issue.\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n});\nvar regenerator = runtime_1;\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nvar asyncToGenerator = _asyncToGenerator;\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar classCallCheck = _classCallCheck;\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nvar createClass = _createClass;\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar defineProperty = _defineProperty;\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n  return target;\n}\nvar objectSpread = _objectSpread;\nfunction doRequest(_ref) {\n  var method = _ref.method,\n    path = _ref.path,\n    _ref$body = _ref.body,\n    body = _ref$body === void 0 ? null : _ref$body,\n    _ref$headers = _ref.headers,\n    headers = _ref$headers === void 0 ? {} : _ref$headers,\n    _ref$credentials = _ref.credentials,\n    credentials = _ref$credentials === void 0 ? 'same-origin' : _ref$credentials;\n  var options = {\n    method: method,\n    headers: headers,\n    credentials: credentials\n  };\n  if (body !== null) {\n    options.body = JSON.stringify(body);\n    options.headers = objectSpread({\n      'Content-Type': 'application/json'\n    }, headers);\n  }\n  return fetch(path, options).then( /*#__PURE__*/\n  function () {\n    var _ref2 = asyncToGenerator( /*#__PURE__*/\n    regenerator.mark(function _callee(response) {\n      return regenerator.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (response.ok) {\n                _context.next = 3;\n                break;\n              }\n              _context.next = 3;\n              return handleError(response);\n            case 3:\n              _context.prev = 3;\n              _context.next = 6;\n              return response.json();\n            case 6:\n              return _context.abrupt(\"return\", _context.sent);\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](3);\n              return _context.abrupt(\"return\", null);\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 9]]);\n    }));\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n}\nfunction handleError(_x2) {\n  return _handleError.apply(this, arguments);\n}\nfunction _handleError() {\n  _handleError = asyncToGenerator( /*#__PURE__*/\n  regenerator.mark(function _callee2(response) {\n    var errorMessage, _ref3, _ref3$error, error, _ref3$description, description;\n    return regenerator.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return response.json();\n          case 3:\n            _ref3 = _context2.sent;\n            _ref3$error = _ref3.error;\n            error = _ref3$error === void 0 ? 'Unknown error' : _ref3$error;\n            _ref3$description = _ref3.description;\n            description = _ref3$description === void 0 ? 'No description' : _ref3$description;\n            errorMessage = \"Unexpected status code \".concat(response.status, \": \").concat(error, \", \").concat(description);\n            _context2.next = 14;\n            break;\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](0);\n            errorMessage = \"Unexpected status code \".concat(response.status, \": Cannot parse error response\");\n          case 14:\n            throw new Error(errorMessage);\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 11]]);\n  }));\n  return _handleError.apply(this, arguments);\n}\nvar TokenProvider = /*#__PURE__*/\nfunction () {\n  function TokenProvider() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      url = _ref.url,\n      queryParams = _ref.queryParams,\n      headers = _ref.headers,\n      credentials = _ref.credentials;\n    classCallCheck(this, TokenProvider);\n    this.url = url;\n    this.queryParams = queryParams;\n    this.headers = headers;\n    this.credentials = credentials;\n  }\n  createClass(TokenProvider, [{\n    key: \"fetchToken\",\n    value: function () {\n      var _fetchToken = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee(userId) {\n        var queryParams, encodedParams, options, response;\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                queryParams = objectSpread({\n                  user_id: userId\n                }, this.queryParams);\n                encodedParams = Object.entries(queryParams).map(function (kv) {\n                  return kv.map(encodeURIComponent).join('=');\n                }).join('&');\n                options = {\n                  method: 'GET',\n                  path: \"\".concat(this.url, \"?\").concat(encodedParams),\n                  headers: this.headers,\n                  credentials: this.credentials\n                };\n                _context.next = 5;\n                return doRequest(options);\n              case 5:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response);\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function fetchToken(_x) {\n        return _fetchToken.apply(this, arguments);\n      }\n      return fetchToken;\n    }()\n  }]);\n  return TokenProvider;\n}();\nvar DeviceStateStore = /*#__PURE__*/\nfunction () {\n  function DeviceStateStore(instanceId) {\n    classCallCheck(this, DeviceStateStore);\n    this._instanceId = instanceId;\n    this._dbConn = null;\n  }\n  createClass(DeviceStateStore, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this = this;\n      return new Promise(function (resolve, reject) {\n        var request = indexedDB.open(_this._dbName);\n        request.onsuccess = function (event) {\n          var db = event.target.result;\n          _this._dbConn = db;\n          _this._readState().then(function (state) {\n            return state === null ? _this.clear() : Promise.resolve();\n          }).then(resolve);\n        };\n        request.onupgradeneeded = function (event) {\n          var db = event.target.result;\n          db.createObjectStore('beams', {\n            keyPath: 'instance_id'\n          });\n        };\n        request.onerror = function (event) {\n          var error = new Error(\"Database error: \".concat(event.target.error));\n          reject(error);\n        };\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      return this._writeState({\n        instance_id: this._instanceId,\n        device_id: null,\n        token: null,\n        user_id: null\n      });\n    }\n  }, {\n    key: \"_readState\",\n    value: function _readState() {\n      var _this2 = this;\n      if (!this.isConnected) {\n        throw new Error('Cannot read value: DeviceStateStore not connected to IndexedDB');\n      }\n      return new Promise(function (resolve, reject) {\n        var request = _this2._dbConn.transaction('beams').objectStore('beams').get(_this2._instanceId);\n        request.onsuccess = function (event) {\n          var state = event.target.result;\n          if (!state) {\n            resolve(null);\n          }\n          resolve(state);\n        };\n        request.onerror = function (event) {\n          reject(event.target.error);\n        };\n      });\n    }\n  }, {\n    key: \"_readProperty\",\n    value: function () {\n      var _readProperty2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee(name) {\n        var state;\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this._readState();\n              case 2:\n                state = _context.sent;\n                if (!(state === null)) {\n                  _context.next = 5;\n                  break;\n                }\n                return _context.abrupt(\"return\", null);\n              case 5:\n                return _context.abrupt(\"return\", state[name] || null);\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function _readProperty(_x) {\n        return _readProperty2.apply(this, arguments);\n      }\n      return _readProperty;\n    }()\n  }, {\n    key: \"_writeState\",\n    value: function _writeState(state) {\n      var _this3 = this;\n      if (!this.isConnected) {\n        throw new Error('Cannot write value: DeviceStateStore not connected to IndexedDB');\n      }\n      return new Promise(function (resolve, reject) {\n        var request = _this3._dbConn.transaction('beams', 'readwrite').objectStore('beams').put(state);\n        request.onsuccess = function (_) {\n          resolve();\n        };\n        request.onerror = function (event) {\n          reject(event.target.error);\n        };\n      });\n    }\n  }, {\n    key: \"_writeProperty\",\n    value: function () {\n      var _writeProperty2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee2(name, value) {\n        var state;\n        return regenerator.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this._readState();\n              case 2:\n                state = _context2.sent;\n                state[name] = value;\n                _context2.next = 6;\n                return this._writeState(state);\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function _writeProperty(_x2, _x3) {\n        return _writeProperty2.apply(this, arguments);\n      }\n      return _writeProperty;\n    }()\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      return this._readProperty('token');\n    }\n  }, {\n    key: \"setToken\",\n    value: function setToken(token) {\n      return this._writeProperty('token', token);\n    }\n  }, {\n    key: \"getDeviceId\",\n    value: function getDeviceId() {\n      return this._readProperty('device_id');\n    }\n  }, {\n    key: \"setDeviceId\",\n    value: function setDeviceId(deviceId) {\n      return this._writeProperty('device_id', deviceId);\n    }\n  }, {\n    key: \"getUserId\",\n    value: function getUserId() {\n      return this._readProperty('user_id');\n    }\n  }, {\n    key: \"setUserId\",\n    value: function setUserId(userId) {\n      return this._writeProperty('user_id', userId);\n    }\n  }, {\n    key: \"getLastSeenSdkVersion\",\n    value: function getLastSeenSdkVersion() {\n      return this._readProperty('last_seen_sdk_version');\n    }\n  }, {\n    key: \"setLastSeenSdkVersion\",\n    value: function setLastSeenSdkVersion(sdkVersion) {\n      return this._writeProperty('last_seen_sdk_version', sdkVersion);\n    }\n  }, {\n    key: \"getLastSeenUserAgent\",\n    value: function getLastSeenUserAgent() {\n      return this._readProperty('last_seen_user_agent');\n    }\n  }, {\n    key: \"setLastSeenUserAgent\",\n    value: function setLastSeenUserAgent(userAgent) {\n      return this._writeProperty('last_seen_user_agent', userAgent);\n    }\n  }, {\n    key: \"_dbName\",\n    get: function get() {\n      return \"beams-\".concat(this._instanceId);\n    }\n  }, {\n    key: \"isConnected\",\n    get: function get() {\n      return this._dbConn !== null;\n    }\n  }]);\n  return DeviceStateStore;\n}();\nvar version = \"1.1.0\";\nvar INTERESTS_REGEX = new RegExp('^(_|\\\\-|=|@|,|\\\\.|;|[A-Z]|[a-z]|[0-9])*$');\nvar MAX_INTEREST_LENGTH = 164;\nvar MAX_INTERESTS_NUM = 5000;\nvar SERVICE_WORKER_URL = \"/service-worker.js?pusherBeamsWebSDKVersion=\".concat(version);\nvar RegistrationState = Object.freeze({\n  PERMISSION_PROMPT_REQUIRED: 'PERMISSION_PROMPT_REQUIRED',\n  PERMISSION_GRANTED_NOT_REGISTERED_WITH_BEAMS: 'PERMISSION_GRANTED_NOT_REGISTERED_WITH_BEAMS',\n  PERMISSION_GRANTED_REGISTERED_WITH_BEAMS: 'PERMISSION_GRANTED_REGISTERED_WITH_BEAMS',\n  PERMISSION_DENIED: 'PERMISSION_DENIED'\n});\nvar Client = /*#__PURE__*/\nfunction () {\n  function Client(config) {\n    classCallCheck(this, Client);\n    if (!config) {\n      throw new Error('Config object required');\n    }\n    var instanceId = config.instanceId,\n      _config$endpointOverr = config.endpointOverride,\n      endpointOverride = _config$endpointOverr === void 0 ? null : _config$endpointOverr,\n      _config$serviceWorker = config.serviceWorkerRegistration,\n      serviceWorkerRegistration = _config$serviceWorker === void 0 ? null : _config$serviceWorker;\n    if (instanceId === undefined) {\n      throw new Error('Instance ID is required');\n    }\n    if (typeof instanceId !== 'string') {\n      throw new Error('Instance ID must be a string');\n    }\n    if (instanceId.length === 0) {\n      throw new Error('Instance ID cannot be empty');\n    }\n    if (!('indexedDB' in window)) {\n      throw new Error('Pusher Beams does not support this browser version (IndexedDB not supported)');\n    }\n    if (!window.isSecureContext) {\n      throw new Error('Pusher Beams relies on Service Workers, which only work in secure contexts. Check that your page is being served from localhost/over HTTPS');\n    }\n    if (!('serviceWorker' in navigator)) {\n      throw new Error('Pusher Beams does not support this browser version (Service Workers not supported)');\n    }\n    if (!('PushManager' in window)) {\n      throw new Error('Pusher Beams does not support this browser version (Web Push not supported)');\n    }\n    if (serviceWorkerRegistration) {\n      var serviceWorkerScope = serviceWorkerRegistration.scope;\n      var currentURL = window.location.href;\n      var scopeMatchesCurrentPage = currentURL.startsWith(serviceWorkerScope);\n      if (!scopeMatchesCurrentPage) {\n        throw new Error(\"Could not initialize Pusher web push: current page not in serviceWorkerRegistration scope (\".concat(serviceWorkerScope, \")\"));\n      }\n    }\n    this.instanceId = instanceId;\n    this._deviceId = null;\n    this._token = null;\n    this._userId = null;\n    this._serviceWorkerRegistration = serviceWorkerRegistration;\n    this._deviceStateStore = new DeviceStateStore(instanceId);\n    this._endpoint = endpointOverride; // Internal only\n\n    this._ready = this._init();\n  }\n  createClass(Client, [{\n    key: \"_init\",\n    value: function () {\n      var _init2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee() {\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this._deviceId !== null)) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                _context.next = 4;\n                return this._deviceStateStore.connect();\n              case 4:\n                if (!this._serviceWorkerRegistration) {\n                  _context.next = 9;\n                  break;\n                }\n                _context.next = 7;\n                return window.navigator.serviceWorker.ready;\n              case 7:\n                _context.next = 12;\n                break;\n              case 9:\n                _context.next = 11;\n                return getServiceWorkerRegistration();\n              case 11:\n                this._serviceWorkerRegistration = _context.sent;\n              case 12:\n                _context.next = 14;\n                return this._detectSubscriptionChange();\n              case 14:\n                _context.next = 16;\n                return this._deviceStateStore.getDeviceId();\n              case 16:\n                this._deviceId = _context.sent;\n                _context.next = 19;\n                return this._deviceStateStore.getToken();\n              case 19:\n                this._token = _context.sent;\n                _context.next = 22;\n                return this._deviceStateStore.getUserId();\n              case 22:\n                this._userId = _context.sent;\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function _init() {\n        return _init2.apply(this, arguments);\n      }\n      return _init;\n    }() // Ensure SDK is loaded and is consistent\n  }, {\n    key: \"_resolveSDKState\",\n    value: function () {\n      var _resolveSDKState2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee2() {\n        return regenerator.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this._ready;\n              case 2:\n                _context2.next = 4;\n                return this._detectSubscriptionChange();\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function _resolveSDKState() {\n        return _resolveSDKState2.apply(this, arguments);\n      }\n      return _resolveSDKState;\n    }()\n  }, {\n    key: \"_detectSubscriptionChange\",\n    value: function () {\n      var _detectSubscriptionChange2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee3() {\n        var storedToken, actualToken, pushTokenHasChanged;\n        return regenerator.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this._deviceStateStore.getToken();\n              case 2:\n                storedToken = _context3.sent;\n                _context3.next = 5;\n                return getWebPushToken(this._serviceWorkerRegistration);\n              case 5:\n                actualToken = _context3.sent;\n                pushTokenHasChanged = storedToken !== actualToken;\n                if (!pushTokenHasChanged) {\n                  _context3.next = 13;\n                  break;\n                }\n                _context3.next = 10;\n                return this._deviceStateStore.clear();\n              case 10:\n                this._deviceId = null;\n                this._token = null;\n                this._userId = null;\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function _detectSubscriptionChange() {\n        return _detectSubscriptionChange2.apply(this, arguments);\n      }\n      return _detectSubscriptionChange;\n    }()\n  }, {\n    key: \"getDeviceId\",\n    value: function () {\n      var _getDeviceId = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee4() {\n        var _this = this;\n        return regenerator.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                return _context4.abrupt(\"return\", this._ready.then(function () {\n                  return _this._deviceId;\n                }));\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n      function getDeviceId() {\n        return _getDeviceId.apply(this, arguments);\n      }\n      return getDeviceId;\n    }()\n  }, {\n    key: \"getToken\",\n    value: function () {\n      var _getToken = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee5() {\n        var _this2 = this;\n        return regenerator.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                return _context5.abrupt(\"return\", this._ready.then(function () {\n                  return _this2._token;\n                }));\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n      function getToken() {\n        return _getToken.apply(this, arguments);\n      }\n      return getToken;\n    }()\n  }, {\n    key: \"getUserId\",\n    value: function () {\n      var _getUserId = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee6() {\n        var _this3 = this;\n        return regenerator.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                return _context6.abrupt(\"return\", this._ready.then(function () {\n                  return _this3._userId;\n                }));\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n      function getUserId() {\n        return _getUserId.apply(this, arguments);\n      }\n      return getUserId;\n    }()\n  }, {\n    key: \"_throwIfNotStarted\",\n    value: function _throwIfNotStarted(message) {\n      if (!this._deviceId) {\n        throw new Error(\"\".concat(message, \". SDK not registered with Beams. Did you call .start?\"));\n      }\n    }\n  }, {\n    key: \"start\",\n    value: function () {\n      var _start = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee7() {\n        var _ref, publicKey, token, deviceId;\n        return regenerator.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                if (isSupportedBrowser()) {\n                  _context7.next = 4;\n                  break;\n                }\n                return _context7.abrupt(\"return\", this);\n              case 4:\n                if (!(this._deviceId !== null)) {\n                  _context7.next = 6;\n                  break;\n                }\n                return _context7.abrupt(\"return\", this);\n              case 6:\n                _context7.next = 8;\n                return this._getPublicKey();\n              case 8:\n                _ref = _context7.sent;\n                publicKey = _ref.vapidPublicKey;\n                _context7.next = 12;\n                return this._getPushToken(publicKey);\n              case 12:\n                token = _context7.sent;\n                _context7.next = 15;\n                return this._registerDevice(token);\n              case 15:\n                deviceId = _context7.sent;\n                _context7.next = 18;\n                return this._deviceStateStore.setToken(token);\n              case 18:\n                _context7.next = 20;\n                return this._deviceStateStore.setDeviceId(deviceId);\n              case 20:\n                _context7.next = 22;\n                return this._deviceStateStore.setLastSeenSdkVersion(version);\n              case 22:\n                _context7.next = 24;\n                return this._deviceStateStore.setLastSeenUserAgent(window.navigator.userAgent);\n              case 24:\n                this._token = token;\n                this._deviceId = deviceId;\n                return _context7.abrupt(\"return\", this);\n              case 27:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n      function start() {\n        return _start.apply(this, arguments);\n      }\n      return start;\n    }()\n  }, {\n    key: \"getRegistrationState\",\n    value: function () {\n      var _getRegistrationState = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee8() {\n        return regenerator.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                if (!(Notification.permission === 'denied')) {\n                  _context8.next = 4;\n                  break;\n                }\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_DENIED);\n              case 4:\n                if (!(Notification.permission === 'granted' && this._deviceId !== null)) {\n                  _context8.next = 6;\n                  break;\n                }\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_GRANTED_REGISTERED_WITH_BEAMS);\n              case 6:\n                if (!(Notification.permission === 'granted' && this._deviceId === null)) {\n                  _context8.next = 8;\n                  break;\n                }\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_GRANTED_NOT_REGISTERED_WITH_BEAMS);\n              case 8:\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_PROMPT_REQUIRED);\n              case 9:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n      function getRegistrationState() {\n        return _getRegistrationState.apply(this, arguments);\n      }\n      return getRegistrationState;\n    }()\n  }, {\n    key: \"addDeviceInterest\",\n    value: function () {\n      var _addDeviceInterest = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee9(interest) {\n        var path, options;\n        return regenerator.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                this._throwIfNotStarted('Could not add Device Interest');\n                validateInterestName(interest);\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests/\").concat(encodeURIComponent(interest));\n                options = {\n                  method: 'POST',\n                  path: path\n                };\n                _context9.next = 8;\n                return doRequest(options);\n              case 8:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n      function addDeviceInterest(_x) {\n        return _addDeviceInterest.apply(this, arguments);\n      }\n      return addDeviceInterest;\n    }()\n  }, {\n    key: \"removeDeviceInterest\",\n    value: function () {\n      var _removeDeviceInterest = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee10(interest) {\n        var path, options;\n        return regenerator.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                this._throwIfNotStarted('Could not remove Device Interest');\n                validateInterestName(interest);\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests/\").concat(encodeURIComponent(interest));\n                options = {\n                  method: 'DELETE',\n                  path: path\n                };\n                _context10.next = 8;\n                return doRequest(options);\n              case 8:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n      function removeDeviceInterest(_x2) {\n        return _removeDeviceInterest.apply(this, arguments);\n      }\n      return removeDeviceInterest;\n    }()\n  }, {\n    key: \"getDeviceInterests\",\n    value: function () {\n      var _getDeviceInterests = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee11() {\n        var path, options;\n        return regenerator.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                this._throwIfNotStarted('Could not get Device Interests');\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests\");\n                options = {\n                  method: 'GET',\n                  path: path\n                };\n                _context11.next = 7;\n                return doRequest(options);\n              case 7:\n                _context11.t0 = _context11.sent['interests'];\n                if (_context11.t0) {\n                  _context11.next = 10;\n                  break;\n                }\n                _context11.t0 = [];\n              case 10:\n                return _context11.abrupt(\"return\", _context11.t0);\n              case 11:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n      function getDeviceInterests() {\n        return _getDeviceInterests.apply(this, arguments);\n      }\n      return getDeviceInterests;\n    }()\n  }, {\n    key: \"setDeviceInterests\",\n    value: function () {\n      var _setDeviceInterests = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee12(interests) {\n        var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, interest, uniqueInterests, path, options;\n        return regenerator.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                this._throwIfNotStarted('Could not set Device Interests');\n                if (!(interests === undefined || interests === null)) {\n                  _context12.next = 5;\n                  break;\n                }\n                throw new Error('interests argument is required');\n              case 5:\n                if (Array.isArray(interests)) {\n                  _context12.next = 7;\n                  break;\n                }\n                throw new Error('interests argument must be an array');\n              case 7:\n                if (!(interests.length > MAX_INTERESTS_NUM)) {\n                  _context12.next = 9;\n                  break;\n                }\n                throw new Error(\"Number of interests (\".concat(interests.length, \") exceeds maximum of \").concat(MAX_INTERESTS_NUM));\n              case 9:\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context12.prev = 12;\n                for (_iterator = interests[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  interest = _step.value;\n                  validateInterestName(interest);\n                }\n                _context12.next = 20;\n                break;\n              case 16:\n                _context12.prev = 16;\n                _context12.t0 = _context12[\"catch\"](12);\n                _didIteratorError = true;\n                _iteratorError = _context12.t0;\n              case 20:\n                _context12.prev = 20;\n                _context12.prev = 21;\n                if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                  _iterator[\"return\"]();\n                }\n              case 23:\n                _context12.prev = 23;\n                if (!_didIteratorError) {\n                  _context12.next = 26;\n                  break;\n                }\n                throw _iteratorError;\n              case 26:\n                return _context12.finish(23);\n              case 27:\n                return _context12.finish(20);\n              case 28:\n                uniqueInterests = Array.from(new Set(interests));\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests\");\n                options = {\n                  method: 'PUT',\n                  path: path,\n                  body: {\n                    interests: uniqueInterests\n                  }\n                };\n                _context12.next = 33;\n                return doRequest(options);\n              case 33:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[12, 16, 20, 28], [21,, 23, 27]]);\n      }));\n      function setDeviceInterests(_x3) {\n        return _setDeviceInterests.apply(this, arguments);\n      }\n      return setDeviceInterests;\n    }()\n  }, {\n    key: \"clearDeviceInterests\",\n    value: function () {\n      var _clearDeviceInterests = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee13() {\n        return regenerator.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _context13.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                this._throwIfNotStarted('Could not clear Device Interests');\n                _context13.next = 5;\n                return this.setDeviceInterests([]);\n              case 5:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n      function clearDeviceInterests() {\n        return _clearDeviceInterests.apply(this, arguments);\n      }\n      return clearDeviceInterests;\n    }()\n  }, {\n    key: \"setUserId\",\n    value: function () {\n      var _setUserId = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee14(userId, tokenProvider) {\n        var error, path, _ref2, beamsAuthToken, options;\n        return regenerator.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                if (isSupportedBrowser()) {\n                  _context14.next = 4;\n                  break;\n                }\n                return _context14.abrupt(\"return\");\n              case 4:\n                if (!(this._deviceId === null)) {\n                  _context14.next = 7;\n                  break;\n                }\n                error = new Error('.start must be called before .setUserId');\n                return _context14.abrupt(\"return\", Promise.reject(error));\n              case 7:\n                if (!(typeof userId !== 'string')) {\n                  _context14.next = 9;\n                  break;\n                }\n                throw new Error(\"User ID must be a string (was \".concat(userId, \")\"));\n              case 9:\n                if (!(userId === '')) {\n                  _context14.next = 11;\n                  break;\n                }\n                throw new Error('User ID cannot be the empty string');\n              case 11:\n                if (!(this._userId !== null && this._userId !== userId)) {\n                  _context14.next = 13;\n                  break;\n                }\n                throw new Error('Changing the `userId` is not allowed.');\n              case 13:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/user\");\n                _context14.next = 16;\n                return tokenProvider.fetchToken(userId);\n              case 16:\n                _ref2 = _context14.sent;\n                beamsAuthToken = _ref2.token;\n                options = {\n                  method: 'PUT',\n                  path: path,\n                  headers: {\n                    Authorization: \"Bearer \".concat(beamsAuthToken)\n                  }\n                };\n                _context14.next = 21;\n                return doRequest(options);\n              case 21:\n                this._userId = userId;\n                return _context14.abrupt(\"return\", this._deviceStateStore.setUserId(userId));\n              case 23:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n      function setUserId(_x4, _x5) {\n        return _setUserId.apply(this, arguments);\n      }\n      return setUserId;\n    }()\n  }, {\n    key: \"stop\",\n    value: function () {\n      var _stop = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee15() {\n        return regenerator.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.next = 2;\n                return this._resolveSDKState();\n              case 2:\n                if (isSupportedBrowser()) {\n                  _context15.next = 4;\n                  break;\n                }\n                return _context15.abrupt(\"return\");\n              case 4:\n                if (!(this._deviceId === null)) {\n                  _context15.next = 6;\n                  break;\n                }\n                return _context15.abrupt(\"return\");\n              case 6:\n                _context15.next = 8;\n                return this._deleteDevice();\n              case 8:\n                _context15.next = 10;\n                return this._deviceStateStore.clear();\n              case 10:\n                this._clearPushToken()[\"catch\"](function () {}); // Not awaiting this, best effort.\n\n                this._deviceId = null;\n                this._token = null;\n                this._userId = null;\n              case 14:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n      function stop() {\n        return _stop.apply(this, arguments);\n      }\n      return stop;\n    }()\n  }, {\n    key: \"clearAllState\",\n    value: function () {\n      var _clearAllState = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee16() {\n        return regenerator.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                if (isSupportedBrowser()) {\n                  _context16.next = 2;\n                  break;\n                }\n                return _context16.abrupt(\"return\");\n              case 2:\n                _context16.next = 4;\n                return this.stop();\n              case 4:\n                _context16.next = 6;\n                return this.start();\n              case 6:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n      function clearAllState() {\n        return _clearAllState.apply(this, arguments);\n      }\n      return clearAllState;\n    }()\n  }, {\n    key: \"_getPublicKey\",\n    value: function () {\n      var _getPublicKey2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee17() {\n        var path, options;\n        return regenerator.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/web-vapid-public-key\");\n                options = {\n                  method: 'GET',\n                  path: path\n                };\n                return _context17.abrupt(\"return\", doRequest(options));\n              case 3:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n      function _getPublicKey() {\n        return _getPublicKey2.apply(this, arguments);\n      }\n      return _getPublicKey;\n    }()\n  }, {\n    key: \"_getPushToken\",\n    value: function () {\n      var _getPushToken2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee18(publicKey) {\n        var sub;\n        return regenerator.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                _context18.prev = 0;\n                _context18.next = 3;\n                return this._clearPushToken();\n              case 3:\n                _context18.next = 5;\n                return this._serviceWorkerRegistration.pushManager.subscribe({\n                  userVisibleOnly: true,\n                  applicationServerKey: urlBase64ToUInt8Array(publicKey)\n                });\n              case 5:\n                sub = _context18.sent;\n                return _context18.abrupt(\"return\", btoa(JSON.stringify(sub)));\n              case 9:\n                _context18.prev = 9;\n                _context18.t0 = _context18[\"catch\"](0);\n                return _context18.abrupt(\"return\", Promise.reject(_context18.t0));\n              case 12:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this, [[0, 9]]);\n      }));\n      function _getPushToken(_x6) {\n        return _getPushToken2.apply(this, arguments);\n      }\n      return _getPushToken;\n    }()\n  }, {\n    key: \"_clearPushToken\",\n    value: function () {\n      var _clearPushToken2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee19() {\n        return regenerator.wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                return _context19.abrupt(\"return\", navigator.serviceWorker.ready.then(function (reg) {\n                  return reg.pushManager.getSubscription();\n                }).then(function (sub) {\n                  if (sub) sub.unsubscribe();\n                }));\n              case 1:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19);\n      }));\n      function _clearPushToken() {\n        return _clearPushToken2.apply(this, arguments);\n      }\n      return _clearPushToken;\n    }()\n  }, {\n    key: \"_registerDevice\",\n    value: function () {\n      var _registerDevice2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee20(token) {\n        var path, device, options, response;\n        return regenerator.wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web\");\n                device = {\n                  token: token,\n                  metadata: {\n                    sdkVersion: version\n                  }\n                };\n                options = {\n                  method: 'POST',\n                  path: path,\n                  body: device\n                };\n                _context20.next = 5;\n                return doRequest(options);\n              case 5:\n                response = _context20.sent;\n                return _context20.abrupt(\"return\", response.id);\n              case 7:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n      function _registerDevice(_x7) {\n        return _registerDevice2.apply(this, arguments);\n      }\n      return _registerDevice;\n    }()\n  }, {\n    key: \"_deleteDevice\",\n    value: function () {\n      var _deleteDevice2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee21() {\n        var path, options;\n        return regenerator.wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(encodeURIComponent(this._deviceId));\n                options = {\n                  method: 'DELETE',\n                  path: path\n                };\n                _context21.next = 4;\n                return doRequest(options);\n              case 4:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this);\n      }));\n      function _deleteDevice() {\n        return _deleteDevice2.apply(this, arguments);\n      }\n      return _deleteDevice;\n    }()\n    /**\n     * Submit SDK version and browser details (via the user agent) to Pusher Beams.\n     */\n  }, {\n    key: \"_updateDeviceMetadata\",\n    value: function () {\n      var _updateDeviceMetadata2 = asyncToGenerator( /*#__PURE__*/\n      regenerator.mark(function _callee22() {\n        var userAgent, storedUserAgent, storedSdkVersion, path, metadata, options;\n        return regenerator.wrap(function _callee22$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                userAgent = window.navigator.userAgent;\n                _context22.next = 3;\n                return this._deviceStateStore.getLastSeenUserAgent();\n              case 3:\n                storedUserAgent = _context22.sent;\n                _context22.next = 6;\n                return this._deviceStateStore.getLastSeenSdkVersion();\n              case 6:\n                storedSdkVersion = _context22.sent;\n                if (!(userAgent === storedUserAgent && version === storedSdkVersion)) {\n                  _context22.next = 9;\n                  break;\n                }\n                return _context22.abrupt(\"return\");\n              case 9:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/metadata\");\n                metadata = {\n                  sdkVersion: version\n                };\n                options = {\n                  method: 'PUT',\n                  path: path,\n                  body: metadata\n                };\n                _context22.next = 14;\n                return doRequest(options);\n              case 14:\n                _context22.next = 16;\n                return this._deviceStateStore.setLastSeenSdkVersion(version);\n              case 16:\n                _context22.next = 18;\n                return this._deviceStateStore.setLastSeenUserAgent(userAgent);\n              case 18:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee22, this);\n      }));\n      function _updateDeviceMetadata() {\n        return _updateDeviceMetadata2.apply(this, arguments);\n      }\n      return _updateDeviceMetadata;\n    }()\n  }, {\n    key: \"_baseURL\",\n    get: function get() {\n      if (this._endpoint !== null) {\n        return this._endpoint;\n      }\n      return \"https://\".concat(this.instanceId, \".pushnotifications.pusher.com\");\n    }\n  }]);\n  return Client;\n}();\nvar validateInterestName = function validateInterestName(interest) {\n  if (interest === undefined || interest === null) {\n    throw new Error('Interest name is required');\n  }\n  if (typeof interest !== 'string') {\n    throw new Error(\"Interest \".concat(interest, \" is not a string\"));\n  }\n  if (!INTERESTS_REGEX.test(interest)) {\n    throw new Error(\"interest \\\"\".concat(interest, \"\\\" contains a forbidden character. \") + 'Allowed characters are: ASCII upper/lower-case letters, ' + 'numbers or one of _-=@,.;');\n  }\n  if (interest.length > MAX_INTEREST_LENGTH) {\n    throw new Error(\"Interest is longer than the maximum of \".concat(MAX_INTEREST_LENGTH, \" chars\"));\n  }\n};\nfunction getServiceWorkerRegistration() {\n  return _getServiceWorkerRegistration.apply(this, arguments);\n}\nfunction _getServiceWorkerRegistration() {\n  _getServiceWorkerRegistration = asyncToGenerator( /*#__PURE__*/\n  regenerator.mark(function _callee23() {\n    var _ref3, swStatusCode;\n    return regenerator.wrap(function _callee23$(_context23) {\n      while (1) {\n        switch (_context23.prev = _context23.next) {\n          case 0:\n            _context23.next = 2;\n            return fetch(SERVICE_WORKER_URL);\n          case 2:\n            _ref3 = _context23.sent;\n            swStatusCode = _ref3.status;\n            if (!(swStatusCode !== 200)) {\n              _context23.next = 6;\n              break;\n            }\n            throw new Error('Cannot start SDK, service worker missing: No file found at /service-worker.js');\n          case 6:\n            window.navigator.serviceWorker.register(SERVICE_WORKER_URL, {\n              // explicitly opting out of `importScripts` caching just in case our\n              // customers decides to host and serve the imported scripts and\n              // accidentally set `Cache-Control` to something other than `max-age=0`\n              updateViaCache: 'none'\n            });\n            return _context23.abrupt(\"return\", window.navigator.serviceWorker.ready);\n          case 8:\n          case \"end\":\n            return _context23.stop();\n        }\n      }\n    }, _callee23);\n  }));\n  return _getServiceWorkerRegistration.apply(this, arguments);\n}\nfunction getWebPushToken(swReg) {\n  return swReg.pushManager.getSubscription().then(function (sub) {\n    return !sub ? null : encodeSubscription(sub);\n  });\n}\nfunction encodeSubscription(sub) {\n  return btoa(JSON.stringify(sub));\n}\nfunction urlBase64ToUInt8Array(base64String) {\n  var padding = '='.repeat((4 - base64String.length % 4) % 4);\n  var base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\n  var rawData = window.atob(base64);\n  return Uint8Array.from(toConsumableArray(rawData).map(function (_char) {\n    return _char.charCodeAt(0);\n  }));\n}\n/**\n * Modified from https://stackoverflow.com/questions/4565112\n */\n\nfunction isSupportedBrowser() {\n  var winNav = window.navigator;\n  var vendorName = winNav.vendor;\n  var isChromium = window.chrome !== null && typeof window.chrome !== 'undefined';\n  var isOpera = winNav.userAgent.indexOf('OPR') > -1;\n  var isEdge = winNav.userAgent.indexOf('Edg') > -1;\n  var isFirefox = winNav.userAgent.indexOf('Firefox') > -1;\n  var isChrome = isChromium && vendorName === 'Google Inc.' && !isEdge && !isOpera;\n  var isSupported = isChrome || isOpera || isFirefox || isEdge;\n  if (!isSupported) {\n    console.warn('Pusher Web Push Notifications supports Chrome, Firefox, Edge and Opera.');\n  }\n  return isSupported;\n}\nexport { Client, RegistrationState, TokenProvider };","map":{"version":3,"names":["_arrayWithoutHoles","arr","Array","isArray","i","arr2","length","arrayWithoutHoles","_iterableToArray","iter","Symbol","iterator","Object","prototype","toString","call","from","iterableToArray","_nonIterableSpread","TypeError","nonIterableSpread","_toConsumableArray","toConsumableArray","createCommonjsModule","fn","module","exports","runtime_1","runtime","Op","hasOwn","hasOwnProperty","undefined$1","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","obj","arg","type","err","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","invoke","resolve","reject","record","result","value","Promise","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","key","reverse","pop","iterable","iteratorMethod","isNaN","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","regenerator","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","undefined","asyncToGenerator","_classCallCheck","instance","Constructor","classCallCheck","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","createClass","_defineProperty","_objectSpread","source","ownKeys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","objectSpread","doRequest","_ref","path","_ref$body","body","_ref$headers","headers","_ref$credentials","credentials","options","JSON","stringify","fetch","_ref2","_callee","response","_callee$","_context","ok","handleError","json","t0","_x","_x2","_handleError","_callee2","errorMessage","_ref3","_ref3$error","_ref3$description","description","_callee2$","_context2","status","TokenProvider","url","queryParams","_fetchToken","userId","encodedParams","user_id","entries","map","kv","encodeURIComponent","join","fetchToken","DeviceStateStore","instanceId","_instanceId","_dbConn","connect","_this","request","indexedDB","open","_dbName","onsuccess","event","db","_readState","clear","onupgradeneeded","createObjectStore","keyPath","onerror","_writeState","instance_id","device_id","token","_this2","isConnected","transaction","objectStore","get","_readProperty2","_readProperty","_this3","put","_","_writeProperty2","_writeProperty","_x3","getToken","setToken","getDeviceId","setDeviceId","deviceId","getUserId","setUserId","getLastSeenSdkVersion","setLastSeenSdkVersion","sdkVersion","getLastSeenUserAgent","setLastSeenUserAgent","userAgent","version","INTERESTS_REGEX","RegExp","MAX_INTEREST_LENGTH","MAX_INTERESTS_NUM","SERVICE_WORKER_URL","RegistrationState","freeze","PERMISSION_PROMPT_REQUIRED","PERMISSION_GRANTED_NOT_REGISTERED_WITH_BEAMS","PERMISSION_GRANTED_REGISTERED_WITH_BEAMS","PERMISSION_DENIED","Client","config","_config$endpointOverr","endpointOverride","_config$serviceWorker","serviceWorkerRegistration","window","isSecureContext","navigator","serviceWorkerScope","scope","currentURL","location","href","scopeMatchesCurrentPage","startsWith","_deviceId","_token","_userId","_serviceWorkerRegistration","_deviceStateStore","_endpoint","_ready","_init","_init2","serviceWorker","ready","getServiceWorkerRegistration","_detectSubscriptionChange","_resolveSDKState2","_resolveSDKState","_detectSubscriptionChange2","_callee3","storedToken","actualToken","pushTokenHasChanged","_callee3$","_context3","getWebPushToken","_getDeviceId","_callee4","_callee4$","_context4","_getToken","_callee5","_callee5$","_context5","_getUserId","_callee6","_callee6$","_context6","_throwIfNotStarted","message","_start","_callee7","publicKey","_callee7$","_context7","isSupportedBrowser","_getPublicKey","vapidPublicKey","_getPushToken","_registerDevice","start","_getRegistrationState","_callee8","_callee8$","_context8","Notification","permission","getRegistrationState","_addDeviceInterest","_callee9","interest","_callee9$","_context9","validateInterestName","_baseURL","addDeviceInterest","_removeDeviceInterest","_callee10","_callee10$","_context10","removeDeviceInterest","_getDeviceInterests","_callee11","_callee11$","_context11","getDeviceInterests","_setDeviceInterests","_callee12","interests","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","uniqueInterests","_callee12$","_context12","Set","setDeviceInterests","_clearDeviceInterests","_callee13","_callee13$","_context13","clearDeviceInterests","_setUserId","_callee14","tokenProvider","beamsAuthToken","_callee14$","_context14","Authorization","_x4","_x5","_stop","_callee15","_callee15$","_context15","_deleteDevice","_clearPushToken","_clearAllState","_callee16","_callee16$","_context16","clearAllState","_getPublicKey2","_callee17","_callee17$","_context17","_getPushToken2","_callee18","sub","_callee18$","_context18","pushManager","subscribe","userVisibleOnly","applicationServerKey","urlBase64ToUInt8Array","btoa","_x6","_clearPushToken2","_callee19","_callee19$","_context19","reg","getSubscription","unsubscribe","_registerDevice2","_callee20","device","_callee20$","_context20","metadata","id","_x7","_deleteDevice2","_callee21","_callee21$","_context21","_updateDeviceMetadata2","_callee22","storedUserAgent","storedSdkVersion","_callee22$","_context22","_updateDeviceMetadata","test","_getServiceWorkerRegistration","_callee23","swStatusCode","_callee23$","_context23","register","updateViaCache","swReg","encodeSubscription","base64String","padding","repeat","base64","replace","rawData","atob","Uint8Array","_char","charCodeAt","winNav","vendorName","vendor","isChromium","chrome","isOpera","indexOf","isEdge","isFirefox","isChrome","isSupported","console","warn"],"sources":["E:/hospital_test/node_modules/@pusher/push-notifications-web/dist/push-notifications-esm.js"],"sourcesContent":["function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar arrayWithoutHoles = _arrayWithoutHoles;\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nvar iterableToArray = _iterableToArray;\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar nonIterableSpread = _nonIterableSpread;\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nvar toConsumableArray = _toConsumableArray;\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar runtime_1 = createCommonjsModule(function (module) {\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined$1; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined$1) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined$1;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined$1;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined$1;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined$1, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined$1;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined$1;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined$1;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined$1;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined$1;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  module.exports\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n});\n\nvar regenerator = runtime_1;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar asyncToGenerator = _asyncToGenerator;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar classCallCheck = _classCallCheck;\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar createClass = _createClass;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar defineProperty = _defineProperty;\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nvar objectSpread = _objectSpread;\n\nfunction doRequest(_ref) {\n  var method = _ref.method,\n      path = _ref.path,\n      _ref$body = _ref.body,\n      body = _ref$body === void 0 ? null : _ref$body,\n      _ref$headers = _ref.headers,\n      headers = _ref$headers === void 0 ? {} : _ref$headers,\n      _ref$credentials = _ref.credentials,\n      credentials = _ref$credentials === void 0 ? 'same-origin' : _ref$credentials;\n  var options = {\n    method: method,\n    headers: headers,\n    credentials: credentials\n  };\n\n  if (body !== null) {\n    options.body = JSON.stringify(body);\n    options.headers = objectSpread({\n      'Content-Type': 'application/json'\n    }, headers);\n  }\n\n  return fetch(path, options).then(\n  /*#__PURE__*/\n  function () {\n    var _ref2 = asyncToGenerator(\n    /*#__PURE__*/\n    regenerator.mark(function _callee(response) {\n      return regenerator.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (response.ok) {\n                _context.next = 3;\n                break;\n              }\n\n              _context.next = 3;\n              return handleError(response);\n\n            case 3:\n              _context.prev = 3;\n              _context.next = 6;\n              return response.json();\n\n            case 6:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](3);\n              return _context.abrupt(\"return\", null);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 9]]);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n}\n\nfunction handleError(_x2) {\n  return _handleError.apply(this, arguments);\n}\n\nfunction _handleError() {\n  _handleError = asyncToGenerator(\n  /*#__PURE__*/\n  regenerator.mark(function _callee2(response) {\n    var errorMessage, _ref3, _ref3$error, error, _ref3$description, description;\n\n    return regenerator.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return response.json();\n\n          case 3:\n            _ref3 = _context2.sent;\n            _ref3$error = _ref3.error;\n            error = _ref3$error === void 0 ? 'Unknown error' : _ref3$error;\n            _ref3$description = _ref3.description;\n            description = _ref3$description === void 0 ? 'No description' : _ref3$description;\n            errorMessage = \"Unexpected status code \".concat(response.status, \": \").concat(error, \", \").concat(description);\n            _context2.next = 14;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](0);\n            errorMessage = \"Unexpected status code \".concat(response.status, \": Cannot parse error response\");\n\n          case 14:\n            throw new Error(errorMessage);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 11]]);\n  }));\n  return _handleError.apply(this, arguments);\n}\n\nvar TokenProvider =\n/*#__PURE__*/\nfunction () {\n  function TokenProvider() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        url = _ref.url,\n        queryParams = _ref.queryParams,\n        headers = _ref.headers,\n        credentials = _ref.credentials;\n\n    classCallCheck(this, TokenProvider);\n\n    this.url = url;\n    this.queryParams = queryParams;\n    this.headers = headers;\n    this.credentials = credentials;\n  }\n\n  createClass(TokenProvider, [{\n    key: \"fetchToken\",\n    value: function () {\n      var _fetchToken = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee(userId) {\n        var queryParams, encodedParams, options, response;\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                queryParams = objectSpread({\n                  user_id: userId\n                }, this.queryParams);\n                encodedParams = Object.entries(queryParams).map(function (kv) {\n                  return kv.map(encodeURIComponent).join('=');\n                }).join('&');\n                options = {\n                  method: 'GET',\n                  path: \"\".concat(this.url, \"?\").concat(encodedParams),\n                  headers: this.headers,\n                  credentials: this.credentials\n                };\n                _context.next = 5;\n                return doRequest(options);\n\n              case 5:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetchToken(_x) {\n        return _fetchToken.apply(this, arguments);\n      }\n\n      return fetchToken;\n    }()\n  }]);\n\n  return TokenProvider;\n}();\n\nvar DeviceStateStore =\n/*#__PURE__*/\nfunction () {\n  function DeviceStateStore(instanceId) {\n    classCallCheck(this, DeviceStateStore);\n\n    this._instanceId = instanceId;\n    this._dbConn = null;\n  }\n\n  createClass(DeviceStateStore, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        var request = indexedDB.open(_this._dbName);\n\n        request.onsuccess = function (event) {\n          var db = event.target.result;\n          _this._dbConn = db;\n\n          _this._readState().then(function (state) {\n            return state === null ? _this.clear() : Promise.resolve();\n          }).then(resolve);\n        };\n\n        request.onupgradeneeded = function (event) {\n          var db = event.target.result;\n          db.createObjectStore('beams', {\n            keyPath: 'instance_id'\n          });\n        };\n\n        request.onerror = function (event) {\n          var error = new Error(\"Database error: \".concat(event.target.error));\n          reject(error);\n        };\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      return this._writeState({\n        instance_id: this._instanceId,\n        device_id: null,\n        token: null,\n        user_id: null\n      });\n    }\n  }, {\n    key: \"_readState\",\n    value: function _readState() {\n      var _this2 = this;\n\n      if (!this.isConnected) {\n        throw new Error('Cannot read value: DeviceStateStore not connected to IndexedDB');\n      }\n\n      return new Promise(function (resolve, reject) {\n        var request = _this2._dbConn.transaction('beams').objectStore('beams').get(_this2._instanceId);\n\n        request.onsuccess = function (event) {\n          var state = event.target.result;\n\n          if (!state) {\n            resolve(null);\n          }\n\n          resolve(state);\n        };\n\n        request.onerror = function (event) {\n          reject(event.target.error);\n        };\n      });\n    }\n  }, {\n    key: \"_readProperty\",\n    value: function () {\n      var _readProperty2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee(name) {\n        var state;\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this._readState();\n\n              case 2:\n                state = _context.sent;\n\n                if (!(state === null)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", null);\n\n              case 5:\n                return _context.abrupt(\"return\", state[name] || null);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _readProperty(_x) {\n        return _readProperty2.apply(this, arguments);\n      }\n\n      return _readProperty;\n    }()\n  }, {\n    key: \"_writeState\",\n    value: function _writeState(state) {\n      var _this3 = this;\n\n      if (!this.isConnected) {\n        throw new Error('Cannot write value: DeviceStateStore not connected to IndexedDB');\n      }\n\n      return new Promise(function (resolve, reject) {\n        var request = _this3._dbConn.transaction('beams', 'readwrite').objectStore('beams').put(state);\n\n        request.onsuccess = function (_) {\n          resolve();\n        };\n\n        request.onerror = function (event) {\n          reject(event.target.error);\n        };\n      });\n    }\n  }, {\n    key: \"_writeProperty\",\n    value: function () {\n      var _writeProperty2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee2(name, value) {\n        var state;\n        return regenerator.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this._readState();\n\n              case 2:\n                state = _context2.sent;\n                state[name] = value;\n                _context2.next = 6;\n                return this._writeState(state);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _writeProperty(_x2, _x3) {\n        return _writeProperty2.apply(this, arguments);\n      }\n\n      return _writeProperty;\n    }()\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      return this._readProperty('token');\n    }\n  }, {\n    key: \"setToken\",\n    value: function setToken(token) {\n      return this._writeProperty('token', token);\n    }\n  }, {\n    key: \"getDeviceId\",\n    value: function getDeviceId() {\n      return this._readProperty('device_id');\n    }\n  }, {\n    key: \"setDeviceId\",\n    value: function setDeviceId(deviceId) {\n      return this._writeProperty('device_id', deviceId);\n    }\n  }, {\n    key: \"getUserId\",\n    value: function getUserId() {\n      return this._readProperty('user_id');\n    }\n  }, {\n    key: \"setUserId\",\n    value: function setUserId(userId) {\n      return this._writeProperty('user_id', userId);\n    }\n  }, {\n    key: \"getLastSeenSdkVersion\",\n    value: function getLastSeenSdkVersion() {\n      return this._readProperty('last_seen_sdk_version');\n    }\n  }, {\n    key: \"setLastSeenSdkVersion\",\n    value: function setLastSeenSdkVersion(sdkVersion) {\n      return this._writeProperty('last_seen_sdk_version', sdkVersion);\n    }\n  }, {\n    key: \"getLastSeenUserAgent\",\n    value: function getLastSeenUserAgent() {\n      return this._readProperty('last_seen_user_agent');\n    }\n  }, {\n    key: \"setLastSeenUserAgent\",\n    value: function setLastSeenUserAgent(userAgent) {\n      return this._writeProperty('last_seen_user_agent', userAgent);\n    }\n  }, {\n    key: \"_dbName\",\n    get: function get() {\n      return \"beams-\".concat(this._instanceId);\n    }\n  }, {\n    key: \"isConnected\",\n    get: function get() {\n      return this._dbConn !== null;\n    }\n  }]);\n\n  return DeviceStateStore;\n}();\n\nvar version = \"1.1.0\";\n\nvar INTERESTS_REGEX = new RegExp('^(_|\\\\-|=|@|,|\\\\.|;|[A-Z]|[a-z]|[0-9])*$');\nvar MAX_INTEREST_LENGTH = 164;\nvar MAX_INTERESTS_NUM = 5000;\nvar SERVICE_WORKER_URL = \"/service-worker.js?pusherBeamsWebSDKVersion=\".concat(version);\nvar RegistrationState = Object.freeze({\n  PERMISSION_PROMPT_REQUIRED: 'PERMISSION_PROMPT_REQUIRED',\n  PERMISSION_GRANTED_NOT_REGISTERED_WITH_BEAMS: 'PERMISSION_GRANTED_NOT_REGISTERED_WITH_BEAMS',\n  PERMISSION_GRANTED_REGISTERED_WITH_BEAMS: 'PERMISSION_GRANTED_REGISTERED_WITH_BEAMS',\n  PERMISSION_DENIED: 'PERMISSION_DENIED'\n});\nvar Client =\n/*#__PURE__*/\nfunction () {\n  function Client(config) {\n    classCallCheck(this, Client);\n\n    if (!config) {\n      throw new Error('Config object required');\n    }\n\n    var instanceId = config.instanceId,\n        _config$endpointOverr = config.endpointOverride,\n        endpointOverride = _config$endpointOverr === void 0 ? null : _config$endpointOverr,\n        _config$serviceWorker = config.serviceWorkerRegistration,\n        serviceWorkerRegistration = _config$serviceWorker === void 0 ? null : _config$serviceWorker;\n\n    if (instanceId === undefined) {\n      throw new Error('Instance ID is required');\n    }\n\n    if (typeof instanceId !== 'string') {\n      throw new Error('Instance ID must be a string');\n    }\n\n    if (instanceId.length === 0) {\n      throw new Error('Instance ID cannot be empty');\n    }\n\n    if (!('indexedDB' in window)) {\n      throw new Error('Pusher Beams does not support this browser version (IndexedDB not supported)');\n    }\n\n    if (!window.isSecureContext) {\n      throw new Error('Pusher Beams relies on Service Workers, which only work in secure contexts. Check that your page is being served from localhost/over HTTPS');\n    }\n\n    if (!('serviceWorker' in navigator)) {\n      throw new Error('Pusher Beams does not support this browser version (Service Workers not supported)');\n    }\n\n    if (!('PushManager' in window)) {\n      throw new Error('Pusher Beams does not support this browser version (Web Push not supported)');\n    }\n\n    if (serviceWorkerRegistration) {\n      var serviceWorkerScope = serviceWorkerRegistration.scope;\n      var currentURL = window.location.href;\n      var scopeMatchesCurrentPage = currentURL.startsWith(serviceWorkerScope);\n\n      if (!scopeMatchesCurrentPage) {\n        throw new Error(\"Could not initialize Pusher web push: current page not in serviceWorkerRegistration scope (\".concat(serviceWorkerScope, \")\"));\n      }\n    }\n\n    this.instanceId = instanceId;\n    this._deviceId = null;\n    this._token = null;\n    this._userId = null;\n    this._serviceWorkerRegistration = serviceWorkerRegistration;\n    this._deviceStateStore = new DeviceStateStore(instanceId);\n    this._endpoint = endpointOverride; // Internal only\n\n    this._ready = this._init();\n  }\n\n  createClass(Client, [{\n    key: \"_init\",\n    value: function () {\n      var _init2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee() {\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this._deviceId !== null)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.next = 4;\n                return this._deviceStateStore.connect();\n\n              case 4:\n                if (!this._serviceWorkerRegistration) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 7;\n                return window.navigator.serviceWorker.ready;\n\n              case 7:\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.next = 11;\n                return getServiceWorkerRegistration();\n\n              case 11:\n                this._serviceWorkerRegistration = _context.sent;\n\n              case 12:\n                _context.next = 14;\n                return this._detectSubscriptionChange();\n\n              case 14:\n                _context.next = 16;\n                return this._deviceStateStore.getDeviceId();\n\n              case 16:\n                this._deviceId = _context.sent;\n                _context.next = 19;\n                return this._deviceStateStore.getToken();\n\n              case 19:\n                this._token = _context.sent;\n                _context.next = 22;\n                return this._deviceStateStore.getUserId();\n\n              case 22:\n                this._userId = _context.sent;\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _init() {\n        return _init2.apply(this, arguments);\n      }\n\n      return _init;\n    }() // Ensure SDK is loaded and is consistent\n\n  }, {\n    key: \"_resolveSDKState\",\n    value: function () {\n      var _resolveSDKState2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee2() {\n        return regenerator.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this._ready;\n\n              case 2:\n                _context2.next = 4;\n                return this._detectSubscriptionChange();\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _resolveSDKState() {\n        return _resolveSDKState2.apply(this, arguments);\n      }\n\n      return _resolveSDKState;\n    }()\n  }, {\n    key: \"_detectSubscriptionChange\",\n    value: function () {\n      var _detectSubscriptionChange2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee3() {\n        var storedToken, actualToken, pushTokenHasChanged;\n        return regenerator.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this._deviceStateStore.getToken();\n\n              case 2:\n                storedToken = _context3.sent;\n                _context3.next = 5;\n                return getWebPushToken(this._serviceWorkerRegistration);\n\n              case 5:\n                actualToken = _context3.sent;\n                pushTokenHasChanged = storedToken !== actualToken;\n\n                if (!pushTokenHasChanged) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                _context3.next = 10;\n                return this._deviceStateStore.clear();\n\n              case 10:\n                this._deviceId = null;\n                this._token = null;\n                this._userId = null;\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _detectSubscriptionChange() {\n        return _detectSubscriptionChange2.apply(this, arguments);\n      }\n\n      return _detectSubscriptionChange;\n    }()\n  }, {\n    key: \"getDeviceId\",\n    value: function () {\n      var _getDeviceId = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee4() {\n        var _this = this;\n\n        return regenerator.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                return _context4.abrupt(\"return\", this._ready.then(function () {\n                  return _this._deviceId;\n                }));\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getDeviceId() {\n        return _getDeviceId.apply(this, arguments);\n      }\n\n      return getDeviceId;\n    }()\n  }, {\n    key: \"getToken\",\n    value: function () {\n      var _getToken = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee5() {\n        var _this2 = this;\n\n        return regenerator.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                return _context5.abrupt(\"return\", this._ready.then(function () {\n                  return _this2._token;\n                }));\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getToken() {\n        return _getToken.apply(this, arguments);\n      }\n\n      return getToken;\n    }()\n  }, {\n    key: \"getUserId\",\n    value: function () {\n      var _getUserId = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee6() {\n        var _this3 = this;\n\n        return regenerator.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                return _context6.abrupt(\"return\", this._ready.then(function () {\n                  return _this3._userId;\n                }));\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getUserId() {\n        return _getUserId.apply(this, arguments);\n      }\n\n      return getUserId;\n    }()\n  }, {\n    key: \"_throwIfNotStarted\",\n    value: function _throwIfNotStarted(message) {\n      if (!this._deviceId) {\n        throw new Error(\"\".concat(message, \". SDK not registered with Beams. Did you call .start?\"));\n      }\n    }\n  }, {\n    key: \"start\",\n    value: function () {\n      var _start = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee7() {\n        var _ref, publicKey, token, deviceId;\n\n        return regenerator.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                if (isSupportedBrowser()) {\n                  _context7.next = 4;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", this);\n\n              case 4:\n                if (!(this._deviceId !== null)) {\n                  _context7.next = 6;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", this);\n\n              case 6:\n                _context7.next = 8;\n                return this._getPublicKey();\n\n              case 8:\n                _ref = _context7.sent;\n                publicKey = _ref.vapidPublicKey;\n                _context7.next = 12;\n                return this._getPushToken(publicKey);\n\n              case 12:\n                token = _context7.sent;\n                _context7.next = 15;\n                return this._registerDevice(token);\n\n              case 15:\n                deviceId = _context7.sent;\n                _context7.next = 18;\n                return this._deviceStateStore.setToken(token);\n\n              case 18:\n                _context7.next = 20;\n                return this._deviceStateStore.setDeviceId(deviceId);\n\n              case 20:\n                _context7.next = 22;\n                return this._deviceStateStore.setLastSeenSdkVersion(version);\n\n              case 22:\n                _context7.next = 24;\n                return this._deviceStateStore.setLastSeenUserAgent(window.navigator.userAgent);\n\n              case 24:\n                this._token = token;\n                this._deviceId = deviceId;\n                return _context7.abrupt(\"return\", this);\n\n              case 27:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function start() {\n        return _start.apply(this, arguments);\n      }\n\n      return start;\n    }()\n  }, {\n    key: \"getRegistrationState\",\n    value: function () {\n      var _getRegistrationState = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee8() {\n        return regenerator.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                if (!(Notification.permission === 'denied')) {\n                  _context8.next = 4;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_DENIED);\n\n              case 4:\n                if (!(Notification.permission === 'granted' && this._deviceId !== null)) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_GRANTED_REGISTERED_WITH_BEAMS);\n\n              case 6:\n                if (!(Notification.permission === 'granted' && this._deviceId === null)) {\n                  _context8.next = 8;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_GRANTED_NOT_REGISTERED_WITH_BEAMS);\n\n              case 8:\n                return _context8.abrupt(\"return\", RegistrationState.PERMISSION_PROMPT_REQUIRED);\n\n              case 9:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getRegistrationState() {\n        return _getRegistrationState.apply(this, arguments);\n      }\n\n      return getRegistrationState;\n    }()\n  }, {\n    key: \"addDeviceInterest\",\n    value: function () {\n      var _addDeviceInterest = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee9(interest) {\n        var path, options;\n        return regenerator.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                this._throwIfNotStarted('Could not add Device Interest');\n\n                validateInterestName(interest);\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests/\").concat(encodeURIComponent(interest));\n                options = {\n                  method: 'POST',\n                  path: path\n                };\n                _context9.next = 8;\n                return doRequest(options);\n\n              case 8:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function addDeviceInterest(_x) {\n        return _addDeviceInterest.apply(this, arguments);\n      }\n\n      return addDeviceInterest;\n    }()\n  }, {\n    key: \"removeDeviceInterest\",\n    value: function () {\n      var _removeDeviceInterest = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee10(interest) {\n        var path, options;\n        return regenerator.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                this._throwIfNotStarted('Could not remove Device Interest');\n\n                validateInterestName(interest);\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests/\").concat(encodeURIComponent(interest));\n                options = {\n                  method: 'DELETE',\n                  path: path\n                };\n                _context10.next = 8;\n                return doRequest(options);\n\n              case 8:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function removeDeviceInterest(_x2) {\n        return _removeDeviceInterest.apply(this, arguments);\n      }\n\n      return removeDeviceInterest;\n    }()\n  }, {\n    key: \"getDeviceInterests\",\n    value: function () {\n      var _getDeviceInterests = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee11() {\n        var path, options;\n        return regenerator.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                this._throwIfNotStarted('Could not get Device Interests');\n\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests\");\n                options = {\n                  method: 'GET',\n                  path: path\n                };\n                _context11.next = 7;\n                return doRequest(options);\n\n              case 7:\n                _context11.t0 = _context11.sent['interests'];\n\n                if (_context11.t0) {\n                  _context11.next = 10;\n                  break;\n                }\n\n                _context11.t0 = [];\n\n              case 10:\n                return _context11.abrupt(\"return\", _context11.t0);\n\n              case 11:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function getDeviceInterests() {\n        return _getDeviceInterests.apply(this, arguments);\n      }\n\n      return getDeviceInterests;\n    }()\n  }, {\n    key: \"setDeviceInterests\",\n    value: function () {\n      var _setDeviceInterests = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee12(interests) {\n        var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, interest, uniqueInterests, path, options;\n\n        return regenerator.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                this._throwIfNotStarted('Could not set Device Interests');\n\n                if (!(interests === undefined || interests === null)) {\n                  _context12.next = 5;\n                  break;\n                }\n\n                throw new Error('interests argument is required');\n\n              case 5:\n                if (Array.isArray(interests)) {\n                  _context12.next = 7;\n                  break;\n                }\n\n                throw new Error('interests argument must be an array');\n\n              case 7:\n                if (!(interests.length > MAX_INTERESTS_NUM)) {\n                  _context12.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Number of interests (\".concat(interests.length, \") exceeds maximum of \").concat(MAX_INTERESTS_NUM));\n\n              case 9:\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context12.prev = 12;\n\n                for (_iterator = interests[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  interest = _step.value;\n                  validateInterestName(interest);\n                }\n\n                _context12.next = 20;\n                break;\n\n              case 16:\n                _context12.prev = 16;\n                _context12.t0 = _context12[\"catch\"](12);\n                _didIteratorError = true;\n                _iteratorError = _context12.t0;\n\n              case 20:\n                _context12.prev = 20;\n                _context12.prev = 21;\n\n                if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                  _iterator[\"return\"]();\n                }\n\n              case 23:\n                _context12.prev = 23;\n\n                if (!_didIteratorError) {\n                  _context12.next = 26;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 26:\n                return _context12.finish(23);\n\n              case 27:\n                return _context12.finish(20);\n\n              case 28:\n                uniqueInterests = Array.from(new Set(interests));\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/interests\");\n                options = {\n                  method: 'PUT',\n                  path: path,\n                  body: {\n                    interests: uniqueInterests\n                  }\n                };\n                _context12.next = 33;\n                return doRequest(options);\n\n              case 33:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[12, 16, 20, 28], [21,, 23, 27]]);\n      }));\n\n      function setDeviceInterests(_x3) {\n        return _setDeviceInterests.apply(this, arguments);\n      }\n\n      return setDeviceInterests;\n    }()\n  }, {\n    key: \"clearDeviceInterests\",\n    value: function () {\n      var _clearDeviceInterests = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee13() {\n        return regenerator.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _context13.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                this._throwIfNotStarted('Could not clear Device Interests');\n\n                _context13.next = 5;\n                return this.setDeviceInterests([]);\n\n              case 5:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function clearDeviceInterests() {\n        return _clearDeviceInterests.apply(this, arguments);\n      }\n\n      return clearDeviceInterests;\n    }()\n  }, {\n    key: \"setUserId\",\n    value: function () {\n      var _setUserId = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee14(userId, tokenProvider) {\n        var error, path, _ref2, beamsAuthToken, options;\n\n        return regenerator.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                if (isSupportedBrowser()) {\n                  _context14.next = 4;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\");\n\n              case 4:\n                if (!(this._deviceId === null)) {\n                  _context14.next = 7;\n                  break;\n                }\n\n                error = new Error('.start must be called before .setUserId');\n                return _context14.abrupt(\"return\", Promise.reject(error));\n\n              case 7:\n                if (!(typeof userId !== 'string')) {\n                  _context14.next = 9;\n                  break;\n                }\n\n                throw new Error(\"User ID must be a string (was \".concat(userId, \")\"));\n\n              case 9:\n                if (!(userId === '')) {\n                  _context14.next = 11;\n                  break;\n                }\n\n                throw new Error('User ID cannot be the empty string');\n\n              case 11:\n                if (!(this._userId !== null && this._userId !== userId)) {\n                  _context14.next = 13;\n                  break;\n                }\n\n                throw new Error('Changing the `userId` is not allowed.');\n\n              case 13:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/user\");\n                _context14.next = 16;\n                return tokenProvider.fetchToken(userId);\n\n              case 16:\n                _ref2 = _context14.sent;\n                beamsAuthToken = _ref2.token;\n                options = {\n                  method: 'PUT',\n                  path: path,\n                  headers: {\n                    Authorization: \"Bearer \".concat(beamsAuthToken)\n                  }\n                };\n                _context14.next = 21;\n                return doRequest(options);\n\n              case 21:\n                this._userId = userId;\n                return _context14.abrupt(\"return\", this._deviceStateStore.setUserId(userId));\n\n              case 23:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function setUserId(_x4, _x5) {\n        return _setUserId.apply(this, arguments);\n      }\n\n      return setUserId;\n    }()\n  }, {\n    key: \"stop\",\n    value: function () {\n      var _stop = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee15() {\n        return regenerator.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.next = 2;\n                return this._resolveSDKState();\n\n              case 2:\n                if (isSupportedBrowser()) {\n                  _context15.next = 4;\n                  break;\n                }\n\n                return _context15.abrupt(\"return\");\n\n              case 4:\n                if (!(this._deviceId === null)) {\n                  _context15.next = 6;\n                  break;\n                }\n\n                return _context15.abrupt(\"return\");\n\n              case 6:\n                _context15.next = 8;\n                return this._deleteDevice();\n\n              case 8:\n                _context15.next = 10;\n                return this._deviceStateStore.clear();\n\n              case 10:\n                this._clearPushToken()[\"catch\"](function () {}); // Not awaiting this, best effort.\n\n\n                this._deviceId = null;\n                this._token = null;\n                this._userId = null;\n\n              case 14:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function stop() {\n        return _stop.apply(this, arguments);\n      }\n\n      return stop;\n    }()\n  }, {\n    key: \"clearAllState\",\n    value: function () {\n      var _clearAllState = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee16() {\n        return regenerator.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                if (isSupportedBrowser()) {\n                  _context16.next = 2;\n                  break;\n                }\n\n                return _context16.abrupt(\"return\");\n\n              case 2:\n                _context16.next = 4;\n                return this.stop();\n\n              case 4:\n                _context16.next = 6;\n                return this.start();\n\n              case 6:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function clearAllState() {\n        return _clearAllState.apply(this, arguments);\n      }\n\n      return clearAllState;\n    }()\n  }, {\n    key: \"_getPublicKey\",\n    value: function () {\n      var _getPublicKey2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee17() {\n        var path, options;\n        return regenerator.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/web-vapid-public-key\");\n                options = {\n                  method: 'GET',\n                  path: path\n                };\n                return _context17.abrupt(\"return\", doRequest(options));\n\n              case 3:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n\n      function _getPublicKey() {\n        return _getPublicKey2.apply(this, arguments);\n      }\n\n      return _getPublicKey;\n    }()\n  }, {\n    key: \"_getPushToken\",\n    value: function () {\n      var _getPushToken2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee18(publicKey) {\n        var sub;\n        return regenerator.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                _context18.prev = 0;\n                _context18.next = 3;\n                return this._clearPushToken();\n\n              case 3:\n                _context18.next = 5;\n                return this._serviceWorkerRegistration.pushManager.subscribe({\n                  userVisibleOnly: true,\n                  applicationServerKey: urlBase64ToUInt8Array(publicKey)\n                });\n\n              case 5:\n                sub = _context18.sent;\n                return _context18.abrupt(\"return\", btoa(JSON.stringify(sub)));\n\n              case 9:\n                _context18.prev = 9;\n                _context18.t0 = _context18[\"catch\"](0);\n                return _context18.abrupt(\"return\", Promise.reject(_context18.t0));\n\n              case 12:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this, [[0, 9]]);\n      }));\n\n      function _getPushToken(_x6) {\n        return _getPushToken2.apply(this, arguments);\n      }\n\n      return _getPushToken;\n    }()\n  }, {\n    key: \"_clearPushToken\",\n    value: function () {\n      var _clearPushToken2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee19() {\n        return regenerator.wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                return _context19.abrupt(\"return\", navigator.serviceWorker.ready.then(function (reg) {\n                  return reg.pushManager.getSubscription();\n                }).then(function (sub) {\n                  if (sub) sub.unsubscribe();\n                }));\n\n              case 1:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19);\n      }));\n\n      function _clearPushToken() {\n        return _clearPushToken2.apply(this, arguments);\n      }\n\n      return _clearPushToken;\n    }()\n  }, {\n    key: \"_registerDevice\",\n    value: function () {\n      var _registerDevice2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee20(token) {\n        var path, device, options, response;\n        return regenerator.wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web\");\n                device = {\n                  token: token,\n                  metadata: {\n                    sdkVersion: version\n                  }\n                };\n                options = {\n                  method: 'POST',\n                  path: path,\n                  body: device\n                };\n                _context20.next = 5;\n                return doRequest(options);\n\n              case 5:\n                response = _context20.sent;\n                return _context20.abrupt(\"return\", response.id);\n\n              case 7:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n\n      function _registerDevice(_x7) {\n        return _registerDevice2.apply(this, arguments);\n      }\n\n      return _registerDevice;\n    }()\n  }, {\n    key: \"_deleteDevice\",\n    value: function () {\n      var _deleteDevice2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee21() {\n        var path, options;\n        return regenerator.wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(encodeURIComponent(this._deviceId));\n                options = {\n                  method: 'DELETE',\n                  path: path\n                };\n                _context21.next = 4;\n                return doRequest(options);\n\n              case 4:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this);\n      }));\n\n      function _deleteDevice() {\n        return _deleteDevice2.apply(this, arguments);\n      }\n\n      return _deleteDevice;\n    }()\n    /**\n     * Submit SDK version and browser details (via the user agent) to Pusher Beams.\n     */\n\n  }, {\n    key: \"_updateDeviceMetadata\",\n    value: function () {\n      var _updateDeviceMetadata2 = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee22() {\n        var userAgent, storedUserAgent, storedSdkVersion, path, metadata, options;\n        return regenerator.wrap(function _callee22$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                userAgent = window.navigator.userAgent;\n                _context22.next = 3;\n                return this._deviceStateStore.getLastSeenUserAgent();\n\n              case 3:\n                storedUserAgent = _context22.sent;\n                _context22.next = 6;\n                return this._deviceStateStore.getLastSeenSdkVersion();\n\n              case 6:\n                storedSdkVersion = _context22.sent;\n\n                if (!(userAgent === storedUserAgent && version === storedSdkVersion)) {\n                  _context22.next = 9;\n                  break;\n                }\n\n                return _context22.abrupt(\"return\");\n\n              case 9:\n                path = \"\".concat(this._baseURL, \"/device_api/v1/instances/\").concat(encodeURIComponent(this.instanceId), \"/devices/web/\").concat(this._deviceId, \"/metadata\");\n                metadata = {\n                  sdkVersion: version\n                };\n                options = {\n                  method: 'PUT',\n                  path: path,\n                  body: metadata\n                };\n                _context22.next = 14;\n                return doRequest(options);\n\n              case 14:\n                _context22.next = 16;\n                return this._deviceStateStore.setLastSeenSdkVersion(version);\n\n              case 16:\n                _context22.next = 18;\n                return this._deviceStateStore.setLastSeenUserAgent(userAgent);\n\n              case 18:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee22, this);\n      }));\n\n      function _updateDeviceMetadata() {\n        return _updateDeviceMetadata2.apply(this, arguments);\n      }\n\n      return _updateDeviceMetadata;\n    }()\n  }, {\n    key: \"_baseURL\",\n    get: function get() {\n      if (this._endpoint !== null) {\n        return this._endpoint;\n      }\n\n      return \"https://\".concat(this.instanceId, \".pushnotifications.pusher.com\");\n    }\n  }]);\n\n  return Client;\n}();\n\nvar validateInterestName = function validateInterestName(interest) {\n  if (interest === undefined || interest === null) {\n    throw new Error('Interest name is required');\n  }\n\n  if (typeof interest !== 'string') {\n    throw new Error(\"Interest \".concat(interest, \" is not a string\"));\n  }\n\n  if (!INTERESTS_REGEX.test(interest)) {\n    throw new Error(\"interest \\\"\".concat(interest, \"\\\" contains a forbidden character. \") + 'Allowed characters are: ASCII upper/lower-case letters, ' + 'numbers or one of _-=@,.;');\n  }\n\n  if (interest.length > MAX_INTEREST_LENGTH) {\n    throw new Error(\"Interest is longer than the maximum of \".concat(MAX_INTEREST_LENGTH, \" chars\"));\n  }\n};\n\nfunction getServiceWorkerRegistration() {\n  return _getServiceWorkerRegistration.apply(this, arguments);\n}\n\nfunction _getServiceWorkerRegistration() {\n  _getServiceWorkerRegistration = asyncToGenerator(\n  /*#__PURE__*/\n  regenerator.mark(function _callee23() {\n    var _ref3, swStatusCode;\n\n    return regenerator.wrap(function _callee23$(_context23) {\n      while (1) {\n        switch (_context23.prev = _context23.next) {\n          case 0:\n            _context23.next = 2;\n            return fetch(SERVICE_WORKER_URL);\n\n          case 2:\n            _ref3 = _context23.sent;\n            swStatusCode = _ref3.status;\n\n            if (!(swStatusCode !== 200)) {\n              _context23.next = 6;\n              break;\n            }\n\n            throw new Error('Cannot start SDK, service worker missing: No file found at /service-worker.js');\n\n          case 6:\n            window.navigator.serviceWorker.register(SERVICE_WORKER_URL, {\n              // explicitly opting out of `importScripts` caching just in case our\n              // customers decides to host and serve the imported scripts and\n              // accidentally set `Cache-Control` to something other than `max-age=0`\n              updateViaCache: 'none'\n            });\n            return _context23.abrupt(\"return\", window.navigator.serviceWorker.ready);\n\n          case 8:\n          case \"end\":\n            return _context23.stop();\n        }\n      }\n    }, _callee23);\n  }));\n  return _getServiceWorkerRegistration.apply(this, arguments);\n}\n\nfunction getWebPushToken(swReg) {\n  return swReg.pushManager.getSubscription().then(function (sub) {\n    return !sub ? null : encodeSubscription(sub);\n  });\n}\n\nfunction encodeSubscription(sub) {\n  return btoa(JSON.stringify(sub));\n}\n\nfunction urlBase64ToUInt8Array(base64String) {\n  var padding = '='.repeat((4 - base64String.length % 4) % 4);\n  var base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\n  var rawData = window.atob(base64);\n  return Uint8Array.from(toConsumableArray(rawData).map(function (_char) {\n    return _char.charCodeAt(0);\n  }));\n}\n/**\n * Modified from https://stackoverflow.com/questions/4565112\n */\n\n\nfunction isSupportedBrowser() {\n  var winNav = window.navigator;\n  var vendorName = winNav.vendor;\n  var isChromium = window.chrome !== null && typeof window.chrome !== 'undefined';\n  var isOpera = winNav.userAgent.indexOf('OPR') > -1;\n  var isEdge = winNav.userAgent.indexOf('Edg') > -1;\n  var isFirefox = winNav.userAgent.indexOf('Firefox') > -1;\n  var isChrome = isChromium && vendorName === 'Google Inc.' && !isEdge && !isOpera;\n  var isSupported = isChrome || isOpera || isFirefox || isEdge;\n\n  if (!isSupported) {\n    console.warn('Pusher Web Push Notifications supports Chrome, Firefox, Edge and Opera.');\n  }\n\n  return isSupported;\n}\n\nexport { Client, RegistrationState, TokenProvider };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}